
import streamlit as st
import math
import datetime

# í˜ì´ì§€ ê¸°ë³¸ ì„¤ì •
st.set_page_config(page_title="ğŸ“š ë§ì¶¤ í•™ìŠµ í”Œë˜ë„ˆ", page_icon="ğŸ“", layout="centered")

# ìŠ¤íƒ€ì¼
st.markdown("""
    <style>
    body {
        background: linear-gradient(120deg, #d4fc79 0%, #96e6a1 100%);
        font-family: 'Pretendard', sans-serif;
    }
    h1, h2, h3 {
        text-align: center;
        color: #2c3e50;
    }
    .plan-box {
        background: rgba(255,255,255,0.9);
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0px 4px 12px rgba(0,0,0,0.15);
        margin-top: 20px;
    }
    </style>
""", unsafe_allow_html=True)

# ì œëª©
st.title("ğŸ“ ë§ì¶¤ í•™ìŠµ ê³„íš ì¶”ì²œ")
st.subheader("ë‚˜ì˜ í•™ìŠµ ì„±í–¥ê³¼ ëª©í‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ íš¨ìœ¨ì ì¸ í•™ìŠµ ê³„íšì„ ì„¸ì›Œë“œë ¤ìš”!")

# ----------------------------
# 1ë‹¨ê³„: í•™ìŠµ ì„±í–¥ ì§„ë‹¨
# ----------------------------
st.markdown("## âœ¨ Step 1. í•™ìŠµ ì„±í–¥ ì§„ë‹¨")

style = st.radio(
    "ğŸ“Œ ì„ í˜¸í•˜ëŠ” í•™ìŠµ ìŠ¤íƒ€ì¼ì€?",
    ["ğŸ–¼ï¸ ì‹œê°í˜• (ë„í‘œ, ì´ë¯¸ì§€ ì¤‘ì‹¬)", "ğŸ§ ì²­ê°í˜• (ê°•ì˜, ì„¤ëª… ì¤‘ì‹¬)", "âœï¸ ì‹¤ì²œí˜• (ë¬¸ì œí’€ì´, ì‹¤ìŠµ ìœ„ì£¼)"]
)

focus_time = st.radio(
    "ğŸ• ì§‘ì¤‘ì´ ì˜ ë˜ëŠ” ì‹œê°„ëŒ€ëŠ”?",
    ["ğŸŒ… ì•„ì¹¨", "ğŸŒ ì˜¤í›„", "ğŸŒ™ ë°¤"]
)

study_mode = st.radio(
    "ğŸ“– ì„ í˜¸í•˜ëŠ” í•™ìŠµ ë°©ì‹ì€?",
    ["â±ï¸ ì§§ê²Œ ìì£¼ ë°˜ë³µ", "ğŸ’¡ ì˜¤ë˜ ëª°ì…í•´ì„œ ì§‘ì¤‘"]
)

st.markdown("---")

# ----------------------------
# 2ë‹¨ê³„: í•™ìŠµ ëª©í‘œ ë° ì‹œê°„
# ----------------------------
st.markdown("## âœ¨ Step 2. í•™ìŠµ ëª©í‘œì™€ ì‹œê°„ ì…ë ¥")

goal = st.text_area("ğŸ“Œ í•™ìŠµ ëª©í‘œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ìˆ˜í•™ 5ë‹¨ì› ì™„ë²½ ì´í•´, ì˜ì–´ ë‹¨ì–´ 300ê°œ ì•”ê¸°)", height=80)
days_left = st.number_input("â³ ë‚¨ì€ ì¼ìˆ˜ (ë©°ì¹  ì•ˆì— ì™„ë£Œí•´ì•¼ í•˜ë‚˜ìš”?)", min_value=1, value=7)
hours_per_day = st.slider("ğŸ• í•˜ë£¨ì— í•™ìŠµ ê°€ëŠ¥í•œ ì‹œê°„ (ì‹œê°„)", min_value=1, max_value=12, value=4)

# ----------------------------
# 3ë‹¨ê³„: í•™ìŠµ ê³„íš ìƒì„±
# ----------------------------
if st.button("ğŸ“– ë‚˜ë§Œì˜ í•™ìŠµ ê³„íš ì„¸ìš°ê¸°"):
    total_hours = days_left * hours_per_day
    study_blocks = int(total_hours / 1.5)   # 1.5ì‹œê°„ ë‹¨ìœ„ ë¸”ë¡
    daily_blocks = math.ceil(study_blocks / days_left)

    # ì„±í–¥ë³„ ë§ì¶¤ íŒ
    tips = {
        "ğŸ–¼ï¸ ì‹œê°í˜• (ë„í‘œ, ì´ë¯¸ì§€ ì¤‘ì‹¬)": "ğŸ‘‰ í”Œë˜ì‹œì¹´ë“œ, ë§ˆì¸ë“œë§µ, ì»¬ëŸ¬ë…¸íŠ¸ë¡œ ì •ë¦¬í•˜ë©´ íš¨ê³¼ì ì´ì—ìš”.",
        "ğŸ§ ì²­ê°í˜• (ê°•ì˜, ì„¤ëª… ì¤‘ì‹¬)": "ğŸ‘‰ ê°•ì˜ ë“£ê¸°, ì„¤ëª… ë…¹ìŒ í›„ ë°˜ë³µ ì²­ì·¨ë¥¼ ì¶”ì²œí•´ìš”.",
        "âœï¸ ì‹¤ì²œí˜• (ë¬¸ì œí’€ì´, ì‹¤ìŠµ ìœ„ì£¼)": "ğŸ‘‰ ë¬¸ì œí’€ì´ì™€ ì‹¤ì „ ì—°ìŠµì„ ë§ì´ í•˜ì„¸ìš”.",
    }
    time_tips = {
        "ğŸŒ… ì•„ì¹¨": "ğŸŒ… ì˜¤ì „ì— ì¤‘ìš”í•œ ê³¼ëª©ì„ ë°°ì¹˜í•˜ì„¸ìš”.",
        "ğŸŒ ì˜¤í›„": "ğŸŒ ì˜¤í›„ì— ë³µìŠµê³¼ ì•”ê¸°ë¥¼ ì§‘ì¤‘í•˜ì„¸ìš”.",
        "ğŸŒ™ ë°¤": "ğŸŒ™ ë°¤ì—ëŠ” ì •ë¦¬ì™€ ì•”ê¸° ê³¼ëª©ì„ í•˜ë©´ ì¢‹ì•„ìš”.",
    }
    mode_tips = {
        "â±ï¸ ì§§ê²Œ ìì£¼ ë°˜ë³µ": "ğŸ” í¬ëª¨ë„ë¡œ ê¸°ë²•(25ë¶„ ì§‘ì¤‘ + 5ë¶„ íœ´ì‹)ì„ í™œìš©í•´ë³´ì„¸ìš”.",
        "ğŸ’¡ ì˜¤ë˜ ëª°ì…í•´ì„œ ì§‘ì¤‘": "â³ 1.5~2ì‹œê°„ ëª°ì… í›„ 15ë¶„ ì •ë„ íœ´ì‹ì´ ì¢‹ì•„ìš”.",
    }

    # ê²°ê³¼ ì¶œë ¥
    st.markdown(f"""
        <div class="plan-box">
        <h2>âœ… ë§ì¶¤ í•™ìŠµ í”Œëœ</h2>
        <p><b>í•™ìŠµ ëª©í‘œ:</b> {goal}</p>
        <p><b>ì´ í•™ìŠµ ê°€ëŠ¥ ì‹œê°„:</b> {total_hours}ì‹œê°„</p>
        <p><b>í•˜ë£¨ ê¶Œì¥ í•™ìŠµ ë¸”ë¡:</b> {daily_blocks} ë¸”ë¡</p>
        <hr>
        <p><b>í•™ìŠµ ìŠ¤íƒ€ì¼:</b> {style} <br> {tips[style]}</p>
        <p><b>ì§‘ì¤‘ ì‹œê°„ëŒ€:</b> {focus_time} <br> {time_tips[focus_time]}</p>
        <p><b>í•™ìŠµ ë°©ì‹:</b> {study_mode} <br> {mode_tips[study_mode]}</p>
        </div>
    """, unsafe_allow_html=True)

    # ì„¸ë¶€ ê³„íš
    st.markdown("### ğŸ“… ì¼ë³„ í•™ìŠµ ê³„íš")
    today = datetime.date.today()
    for i in range(days_left):
        date = today + datetime.timedelta(days=i)
        st.write(f"**{date}**: {daily_blocks} ë¸”ë¡ ({daily_blocks*1.5:.1f}ì‹œê°„ í•™ìŠµ)")

    st.success("âœ¨ ì„±í–¥ì— ë§ëŠ” ê³„íšì„ ì˜ ì§€í‚¤ë©´ ëª©í‘œ ë‹¬ì„±ì— í•œ ë°œ ê°€ê¹Œì›Œì ¸ìš”! ğŸš€")
